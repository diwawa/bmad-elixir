---
name: elixir-discipline
description: 在任何响应之前的强制预检查 - 确保您使用适用的技能并遵循最佳实践。在响应任何 Elixir/Phoenix 请求之前使用此技能。
---

# Elixir 纪律：强制技能执行

## 绝对要求

在响应任何关于 Elixir/Phoenix 代码的请求之前，您必须完成此检查清单。

这不是可选的。这不是可协商的。您不能为绕过此要求找理由。

## 响应前检查清单

**停止。在输入任何响应之前，问问自己：**

1. **这是关于实现功能或修复错误吗？**
   → 首先使用 `elixir-tdd-enforcement` 技能
   → 没有失败测试就没有代码

2. **这是关于调试错误或问题吗？**
   → 使用 `elixir-root-cause-only` 技能
   → 没有快速修复，首先追溯到根本原因

3. **我是否声称某些内容有效？**
   → 使用 `elixir-verification-gate` 技能
   → 运行实际命令，阅读实际输出

4. **我是否即将修改忽略文件（dialyzer.ignore，.credo.exs 排除）？**
   → 立即停止
   → 使用 `elixir-no-shortcuts` 技能
   → 修复真正的问题

5. **我是否正在为必需数据创建占位符代码或默认值？**
   → 立即停止
   → 使用 `elixir-no-placeholders` 技能
   → 大声失败，快速失败，无静默失败

6. **我是否建议"试试看"某些内容？**
   → 停止
   → 使用系统调试代替

## 如果技能适用，您必须使用它

**这意味着：**
- 宣布您正在使用的技能
- 完全按照说明执行
- 不要跳过步骤
- 不要修改流程

**如果您在技能适用时跳过它 = 任务失败**

## 错误的合理化

### "这只是个简单问题"
错误。无论如何都要检查技能列表。

### "我记得这个技能，我不需要阅读它"
错误。每次都阅读它。细节很重要。

### "该技能可能不适用于这里"
错误。如果有 1% 的可能适用，您必须阅读它。

### "我会快速完成这个"
错误。快速通常意味着错误。使用适当的技能。

### "用户只想要一个简单答案"
错误。用户想要正确的答案。使用技能确保正确性。

### "这会花费太长时间"
错误。做错会花费更长时间。使用技能。

## 执行

**每个关于 Elixir/Phoenix 代码的响应必须以以下内容开始：**

```
[检查适用的技能...]
- elixir-tdd-enforcement: [是/否 - 原因]
- elixir-root-cause-only: [是/否 - 原因]
- elixir-verification-gate: [是/否 - 原因]
- elixir-no-shortcuts: [是/否 - 原因]
- elixir-no-placeholders: [是/否 - 原因]

[使用技能：技能名称]
```

**如果您在没有此检查清单的情况下响应 = 自动失败。**

## 技能描述

**elixir-tdd-enforcement**
- 何时使用：实现任何功能或错误修复
- 强制执行：测试优先，观察失败，然后实现
- 防止：没有测试的代码，未经测试的更改

**elixir-root-cause-only**
- 何时使用：调试任何错误或问题
- 强制执行：在提出修复之前追溯到根本原因
- 防止：症状修复，随机更改

**elixir-verification-gate**
- 何时使用：声称任何内容有效（测试通过，构建成功等）
- 强制执行：运行实际命令，阅读实际输出
- 防止：假设，"应该工作"，过早完成

**elixir-no-shortcuts**
- 何时使用：即将修改忽略文件或抑制警告
- 强制执行：修复真正的问题
- 防止：技术债务累积

**elixir-no-placeholders**
- 何时使用：创建任何代码或数据结构
- 强制执行：没有占位符代码，没有必需数据的默认值，大声失败
- 防止：静默失败，调试噩梦，掩盖的错误

## 跳过技能的后果

**如果您跳过适用的技能：**
1. 代码将是错误的
2. 测试实际上不会验证行为
3. 错误实际上不会被修复
4. 技术债务将累积
5. 用户将不得不重新做工作

**通过跳过技能"节省"的时间在调试中会损失 10 倍。**

## 记住

> "如果您有任务的技能，您必须使用它，否则您将无法完成任务。"

这不是关于偏好的。这是关于生成正确、可维护的 Elixir 代码。

## 规则

**如果技能有 1% 的可能适用 → 您绝对必须使用它**

没有例外。没有特殊情况。没有"就这一次。"
